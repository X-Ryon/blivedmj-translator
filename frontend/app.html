<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <title>å¼¹å¹•å§¬-ä½†æ˜¯äººå·¥æ™ºéšœç¿»è¯‘ç‰ˆ</title>
    <link rel="stylesheet" href="/frontend/system.css">
    <link rel="stylesheet" href="/frontend/danmu.css">
    <style>
        #superchat-bar {
            display: flex;
            flex-direction: row;
            gap: 12px;
            overflow-x: auto;
            padding-bottom: 4px;
            margin-bottom: 8px;
            scrollbar-width: thin;
            scrollbar-color: #ffb6d5 #fff6b7;
        }
        .superchat-item {
            display: inline-block;
            min-width: 120px;
            max-width: 220px;
            background: linear-gradient(90deg, #ffb6d5 0%, #fff6b7 100%);
            border-radius: 16px;
            padding: 8px 18px;
            margin-right: 6px;
            font-size: 18px;
            font-weight: bold;
            color: #b71c1c;
            border: 2px solid #ffd6e7;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(255,182,213,0.13);
            transition: background 0.2s, box-shadow 0.2s;
            white-space: normal;
        }
        .superchat-item:hover {
            background: linear-gradient(90deg, #fff6b7 0%, #ffb6d5 100%);
            box-shadow: 0 4px 16px #ffd6e7;
        }
        .danmu-superchat {
            background: linear-gradient(90deg, #ffb6d5 0%, #fff6b7 100%);
            border: 2.5px solid #ffd6e7;
            color: #b71c1c;
            font-weight: bold;
        }
    </style>
</head>
<body style="height:100vh;margin:0;padding:0;">
    <div id="login-wrap" style="display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;width:100vw; margin-top:-50px;">
        <div id="config-panel" style="width:400px;max-width:400px;min-width:400px;">
            <div style="margin-bottom:22px; padding:18px 12px; background:rgba(44,44,44,0.85); border-radius:8px;">
                <div style="font-weight:bold; margin-bottom:10px; color:#ffffff;">ç›´æ’­é—´è®¾ç½®</div>
                <div style="margin-bottom:14px;">
                    <label for="roomid">æˆ¿é—´å·:</label><br>
                    <input id="roomid" style="width:90%;height:38px;font-size:18px;border-radius:6px;border:1px solid #888;padding:6px 10px;" />
                </div>
                <div>
                    <label for="sessdata">SESSDATA:<br><span style="font-size:12px;color:#aaa;">(å¯ä¸å¡«ï¼Œä¸å¡«åˆ™ä¸æ˜¾ç¤ºå‘é€è€…åç§°)</span></label><br>
                    <input id="sessdata" style="width:90%;height:38px;font-size:18px;border-radius:6px;border:1px solid #888;padding:6px 10px;" />
                </div>
            </div>
            <div style="margin-bottom:22px; padding:18px 12px; background:rgba(44,44,44,0.85); border-radius:8px;">
                <div style="font-weight:bold; margin-bottom:10px; color:#ffffff;">ç™¾åº¦ç¿»è¯‘APIè®¾ç½®</div>
                <div style="margin-bottom:14px;">
                    <label for="appid">APP ID:</label><br>
                    <input id="appid" style="width:90%;height:38px;font-size:18px;border-radius:6px;border:1px solid #888;padding:6px 10px;" />
                </div>
                <div>
                    <label for="secret">å¯†é’¥:</label><br>
                    <input id="secret" type="password" style="width:90%;height:38px;font-size:18px;border-radius:6px;border:1px solid #888;padding:6px 10px;" />
                </div>
            </div>
            <button id="start-btn" style="margin-top:10px;width:100%;height:44px;font-size:18px;border-radius:8px;background:#ffd700;color:#222;font-weight:bold;border:none;box-shadow:0 2px 8px rgba(0,0,0,0.08);">ç™»å½•</button>
            <button id="help-btn" style="margin-top:12px;width:100%;height:40px;font-size:16px;border-radius:8px;background:#eee;color:#333;font-weight:bold;border:none;box-shadow:0 1px 4px rgba(0,0,0,0.06);">å¸®åŠ©</button>
        </div>
    </div>
    <div id="main-area" style="display:none;width:100vw;min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;min-width:440px;min-height:480px;">
        <!-- æˆ¿é—´å·çª—å£ï¼Œå¼¹å¹•åŒºä¸Šæ–¹ä¸”è‡ªé€‚åº” -->
        <div id="roomid-info" style="display:none;">
            <div class="roomid-block">
                <span class="roomid-label">æˆ¿é—´å·ï¼š</span>
                <span id="roomid-value"></span>
            </div>
            <div class="roomid-block">
                <span class="roomid-label">APIç”¨é‡ï¼š</span>
                <span id="usage-count">0</span>
                <span class="usage-unit">å­—ç¬¦</span>
            </div>
        </div>
        <!-- åœ¨ #danmu-list ä¸Šæ–¹æ·»åŠ  -->
        <div id="superchat-bar"></div>
        <div id="gift-bar"></div>
        <!-- å¼¹å¹•åŒºè‡ªé€‚åº”ï¼Œé¡¶éƒ¨æœ‰marginé¿å…ä¸æˆ¿é—´å·é‡å  -->
        <div id="danmu-list" >
            <!-- å¼¹å¹•å†…å®¹åœ¨è¿™é‡Œ -->
        </div>
        <button id="scroll-bottom-btn" title="æ»šåŠ¨åˆ°åº•éƒ¨">â¬‡</button>
    </div>
    <!-- æ›´æ”¹èƒŒæ™¯å’Œç§»é™¤èƒŒæ™¯æŒ‰é’®ï¼Œå·¦ä¸‹è§’å›ºå®š -->
    <div style="position:fixed;left:24px;bottom:24px;z-index:2001;display:flex;gap:10px;">
        <button id="remove-bg-btn" title="ç§»é™¤èƒŒæ™¯" style="
            width:38px;height:38px;
            border-radius:50%;
            background:#fff6fa;
            color:#d14e7b;
            border:2px solid #ffd6e7;
            font-size:20px;
            font-weight:bold;
            box-shadow:0 2px 8px #ffd6e7aa;
            cursor:pointer;
            display:flex;align-items:center;justify-content:center;
            transition:background 0.2s,transform 0.1s;
            margin-right:0;
        ">ğŸ§¹</button>
        <button id="bg-btn" title="æ›´æ”¹èƒŒæ™¯" style="
            width:38px;height:38px;
            border-radius:50%;
            background:#fff6fa;
            color:#d14e7b;
            border:2px solid #ffd6e7;
            font-size:20px;
            font-weight:bold;
            box-shadow:0 2px 8px #ffd6e7aa;
            cursor:pointer;
            display:flex;align-items:center;justify-content:center;
            transition:background 0.2s,transform 0.1s;
        ">ğŸ–¼ï¸</button>
        <input type="file" id="bg-file" accept="image/*" style="display:none;" />
    </div>
    <!-- é€€å‡ºç™»å½•æŒ‰é’®ï¼Œå³ä¸‹è§’å›ºå®š -->
    <button id="logout-btn" title="é€€å‡ºç™»å½•" style="
        display:none;
        position:fixed;
        right:24px;
        bottom:24px;
        z-index:2001;
        width:38px;height:38px;
        border-radius:50%;
        background:#fff6fa;
        color:#d14e7b;
        border:2px solid #ffd6e7;
        font-size:22px;
        font-weight:bold;
        box-shadow:0 2px 8px #ffd6e7aa;
        cursor:pointer;
        display:flex;align-items:center;justify-content:center;
        transition:background 0.2s,transform 0.1s;
    ">ğŸšª</button>
    <!-- æ¸…å±æŒ‰é’®ï¼Œå³ä¸‹è§’å›ºå®š -->
    <button id="clear-btn" title="æ¸…å±" style="
        position:fixed;
        right:74px;
        bottom:24px;
        z-index:2001;
        width:38px;height:38px;
        border-radius:50%;
        background:#fff6fa;
        color:#d14e7b;
        border:2px solid #ffd6e7;
        font-size:20px;
        font-weight:bold;
        box-shadow:0 2px 8px #ffd6e7aa;
        cursor:pointer;
        display:flex;align-items:center;justify-content:center;
        transition:background 0.2s,transform 0.1s;
    ">ğŸ§½</button>
    <!-- æ”¶è—å¼¹å¹•æŒ‰é’®ï¼Œå³ä¸Šè§’ -->
    <button id="fav-list-btn" title="æŸ¥çœ‹æ”¶è—å¼¹å¹•" style="
        position:fixed;
        right:32px;
        top:32px;
        z-index:2002;
        background: #ffe066;
        color: #b71c1c;
        border: none;
        border-radius: 50%;
        width: 48px;
        height: 48px;
        font-size: 28px;
        box-shadow: 0 2px 8px #ffe06655;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
    ">â˜…</button>
    <div id="popup">
        <span id="popup-close">âœ–</span>
        <div id="popup-content">è¿™é‡Œæ˜¯å¼¹çª—å†…å®¹</div>
    </div>
    <div id="help-popup" style="display:none;position:fixed;left:50%;top:45%;transform:translate(-50%,-50%);background:#fff;color:#222;border:1px solid #888;border-radius:10px;z-index:2000;min-width:260px;max-width:90vw;box-shadow:0 2px 16px rgba(0,0,0,0.18);padding:28px 22px;">
        <span id="help-popup-close" style="float:right;cursor:pointer;font-size:20px;color:#888;">âœ–</span>
        <div id="help-popup-content">
            <!-- è¿™é‡Œæ˜¯å¸®åŠ©å†…å®¹ï¼Œè¯·è‡ªè¡Œä¿®æ”¹ -->
            <h3 style="margin-top:0;">å¸®åŠ©</h3>
            <p>*æ¬¢è¿ä½¿ç”¨æœ¬å¼¹å¹•å§¬ï¼ä¹¾æ¯ - ( ã‚œ- ã‚œ)ã¤ãƒ­</p>
            <p>*æˆ¿é—´å·ï¼ŒAPP IDå’Œç§˜é’¥ä¸ºå¿…å¡«é¡¹ã€‚</p>
            <p>
                *<a href="https://docs.qq.com/doc/DS0VZRkdRVU9GSXBY" target="_blank" style="color:#1976d2;text-decoration:underline;">ç‚¹æˆ‘æŸ¥çœ‹æ•™ç¨‹</a>
            </p>
        </div>
    </div>
    <div id="fav-list-popup" style="
        display:none;
        position:fixed;
        right:60px;
        top:90px;
        width:420px;
        max-width:90vw;
        max-height:70vh;
        overflow-y:auto;
        background:#fff0fa;
        border:2.5px solid #ff90b3;
        border-radius:18px;
        box-shadow:0 2px 18px rgba(255,182,213,0.22);
        z-index:3000;
        padding:24px 18px;
    ">
        <div style="font-weight:bold;font-size:20px;margin-bottom:12px;color:#d14e7b;">æ ‡è®°çš„å¼¹å¹•</div>
        <div id="fav-list-content"></div>
    </div>
    <div id="author-info" style="
        position:fixed;
        left:0;
        bottom:0;
        width:100vw;
        text-align:center;
        color:#000000;
        font-size:14px;
        background:rgba(255,255,255,0.92);
        z-index:100;
        padding:10px 0 8px 0;
        box-shadow:0 -2px 12px rgba(255,182,213,0.08);
        user-select:none;
    ">
        ä½œè€…ï¼š<a href="https://space.bilibili.com/3772038" target="_blank" style="color:#1976d2;text-decoration:underline;">@XRyon</a>
        &nbsp;|&nbsp;
        <a href="https://github.com/X-Ryon/blivedmj-translator" target="_blank" style="color:#1976d2;text-decoration:underline;">å‰å¾€Githubä»“åº“</a><br>
        ç‰ˆæœ¬ï¼šv2.1.4 &nbsp;|&nbsp; æœ€åæ›´æ–°ï¼š2025-05-19<br>
        å£°æ˜ï¼š æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ äº¤æµï¼Œç¦æ­¢å•†ç”¨
    </div>
    <script type="module" src="/frontend/ui.js"></script>
    <script type="module" src="/frontend/main.js"></script>
    
    <!-- å¼¹çª— -->
    <div id="confirm-bg-modal" style="display:none;position:fixed;left:0;top:0;width:100vw;height:100vh;z-index:5000;background:rgba(0,0,0,0.18);align-items:center;justify-content:center;">
        <div style="background:#fffbe6;border-radius:16px;box-shadow:0 2px 16px #ffd6e7aa;padding:32px 28px;min-width:240px;max-width:90vw;text-align:center;">
            <div style="font-size:18px;color:#d14e7b;font-weight:bold;margin-bottom:18px;">ç§»é™¤èƒŒæ™¯å›¾ç‰‡</div>
            <div style="color:#555;margin-bottom:22px;">ç¡®å®šè¦ç§»é™¤èƒŒæ™¯å›¾ç‰‡å—ï¼Ÿ</div>
            <button id="confirm-bg-ok" style="margin-right:18px;padding:6px 24px;border-radius:8px;background:#ffd6e7;color:#d14e7b;border:none;font-weight:bold;cursor:pointer;">ç¡®å®š</button>
            <button id="confirm-bg-cancel" style="padding:6px 24px;border-radius:8px;background:#eee;color:#888;border:none;font-weight:bold;cursor:pointer;">å–æ¶ˆ</button>
        </div>
    </div>
</body>

<div id="confirm-clear-modal" style="display:none;position:fixed;left:0;top:0;width:100vw;height:100vh;z-index:5000;background:rgba(0,0,0,0.18);align-items:center;justify-content:center;">
  <div style="background:#fffbe6;border-radius:16px;box-shadow:0 2px 16px #ffd6e7aa;padding:32px 28px;min-width:260px;max-width:90vw;text-align:center;">
    <div style="font-size:18px;color:#d14e7b;font-weight:bold;margin-bottom:18px;">æ¸…é™¤å†…å®¹</div>
    <div style="color:#555;margin-bottom:18px;">è¯·é€‰æ‹©è¦æ¸…ç©ºçš„å†…å®¹ï¼š</div>
    <div style="text-align:left;margin-bottom:18px;">
      <label style="display:block;margin-bottom:8px;">
        <input type="checkbox" id="clear-danmu">å¼¹å¹•åŒº
      </label>
      <label style="display:block;margin-bottom:8px;">
        <input type="checkbox" id="clear-superchat">scè®°å½•åŒº
      </label>
      <label style="display:block;margin-bottom:8px;">
        <input type="checkbox" id="clear-fav">å¼¹å¹•æ”¶è—åˆ—è¡¨
      </label>
      <label style="display:block;margin-bottom:8px;">
        <input type="checkbox" id="clear-gift">ç¤¼ç‰©åŒº
      </label>
      
    </div>
    <button id="confirm-clear-ok" style="margin-right:18px;padding:6px 24px;border-radius:8px;background:#ffd6e7;color:#d14e7b;border:none;font-weight:bold;cursor:pointer;">ç¡®å®š</button>
    <button id="confirm-clear-cancel" style="padding:6px 24px;border-radius:8px;background:#eee;color:#888;border:none;font-weight:bold;cursor:pointer;">å–æ¶ˆ</button>
  </div>
</div>
</html>